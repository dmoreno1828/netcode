(function(n){var t=n(window),i=t.height();t.resize(function(){i=t.height()}),n.fn.parallax=function(r,u,f){function s(){var f=t.scrollTop();e.each(function(){var t=n(this),s=t.offset().top,c=o(t);s+c<f||s>f+i||e.css("backgroundPosition",r+" "+Math.round((h-f)*u)+"px")})}var e=n(this),o,h,c=0;e.each(function(){h=e.offset().top}),o=f?function(n){return n.outerHeight(!0)}:function(n){return n.height()},(arguments.length<1||r===null)&&(r="50%"),(arguments.length<2||u===null)&&(u=.1),(arguments.length<3||f===null)&&(f=!0),t.bind("scroll",s).resize(s),s()}})(jQuery)